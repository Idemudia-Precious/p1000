(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1212:function(e,t,r){var n=r(1213);"string"==typeof n&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(23)(n,o);n.locals&&(e.exports=n.locals)},1213:function(e,t,r){(e.exports=r(22)(!1)).push([e.i,".ClassAverage{background:#fff;border:1px solid #dfdfdf;box-shadow:0 1px 3px 0 rgba(0,0,0,0.15);margin:20px;padding:20px;text-align:center}.ClassAverage__heading{color:#727272;font-family:open-sans, Helvetica, sans-serif;font-size:14px;font-weight:bold;margin:0 0 5px;text-transform:uppercase}.ClassAverage__number{font-size:36px;font-weight:600;line-height:1}.ClassAverage__number--good{color:#3a8200}.ClassAverage__number--fair{color:#3f3f3f}.ClassAverage__number--fail{color:#e70000}\n",""])},1214:function(e,t,r){var n=r(1215);"string"==typeof n&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(23)(n,o);n.locals&&(e.exports=n.locals)},1215:function(e,t,r){(e.exports=r(22)(!1)).push([e.i,".PerformanceDashboard{background:#fff;border:1px solid #dfdfdf;box-shadow:0 1px 3px 0 rgba(0,0,0,0.15);font-size:20px;margin:20px;padding:20px}.PerformanceDashboard__title{color:#3f3f3f;font-size:20px;font-weight:600;margin-top:0}.PerformanceDashboard__header{font-size:15px}.PerformanceDashboard__body{margin-top:-20px;position:relative}.PerformanceDashboard__emptyMessage{align-items:flex-start;display:flex;justify-content:center;left:0;position:absolute;right:40px;top:100px}.PerformanceDashboard__emptyMessageText{background:#fff;border:1px solid #dfdfdf;box-shadow:0 1px 3px 0 rgba(0,0,0,0.15);font-size:15px;line-height:20px;max-width:300px;padding:15px;width:80%}.PerformanceDashboard__PointButtonsContainer{position:absolute;height:280px;width:100%;margin-top:72px;top:0;left:0}.PerformanceDashboard__PerformanceChart{height:400px;width:100%}.PerformanceDashboard__PerformanceChart .xLine{stroke:#dfdfdf;stroke-width:1}.PerformanceDashboard__PerformanceChart .yLabel{fill:#575757;background-color:#fff;font-size:13px}.PerformanceDashboard__ActivityPopover{border:1px solid #dfdfdf;border-radius:3px;box-shadow:0 2px 6px 0 rgba(0,0,0,0.17);font-size:15px;margin-top:5px}.PerformanceDashboard__ActivityPopover .arrow{display:none}.PerformanceDashboard__ActivityPopover__link{font-weight:bold;line-height:20px;margin-bottom:10px;padding:0;text-align:left}.PerformanceDashboard__ActivityPopover__link.is-focused{color:#003865;text-decoration:underline}.PerformanceDashboard__ActivityPopover__score{color:#3a8200;font-weight:bold}.PerformanceDashboard .ActivityCircle{cursor:pointer;position:absolute;border-radius:50%;height:14px;width:14px;border:4px solid transparent;padding:0;margin:1px}.PerformanceDashboard .ActivityCircle.is-fail{background-color:#e70000;border-color:#e70000}.PerformanceDashboard .ActivityCircle.is-fair{background-color:#f0aa30;border-color:#f0aa30}.PerformanceDashboard .ActivityCircle.is-good{background-color:#48a200;border-color:#48a200}.PerformanceDashboard .ActivityCircle.is-notGraded{background-color:#727272;border-color:#727272}.PerformanceDashboard .ActivityCircle:hover{border:3px solid #dfdfdf;height:17px;width:17px;margin:0}.PerformanceDashboard .ActivityCircle:focus{border:3px solid #fa6600;height:17px;width:17px;margin:0}.PerfomanceReportingWidgets{display:flex;justify-content:space-between;flex-wrap:wrap;padding-left:20px}.PerfomanceReportingWidgets__widgetWrapper{background:#fff;border:1px solid #dfdfdf;box-shadow:0 1px 3px 0 rgba(0,0,0,0.15);margin-bottom:20px;margin-right:20px;flex:1 1 auto;min-width:133px;height:230px}.PerfomanceReportingWidgets__widgetWrapper.studentWidget{margin-top:20px;display:table;width:calc(100% - 20px)}@media (max-width: 985px){.PerfomanceReportingWidgets{flex-direction:column}}.PerfomanceReportingWidgets__widgetWrapper>.troubled-topics-widget,.PerfomanceReportingWidgets__widgetWrapper>.objectives-overview-widget{height:100%}\n",""])},1471:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(46),i=r(1),c=r.n(i),s=r(1192),u=r(254),l=r.n(u),p=r(60),f=r(54),d=r(368),h=r(40);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e,t){if(d.b(e,t)||d.c(e))return e.endDate||e.courseEndDate;var r=c.a.findLast(e.attempts,"endTime")||c.a.findLast(e.attempts,"startTime");return r&&(r.endTime||r.startTime)||0},v=function(e,t){return c.a.chain(e).filter((function(e){return e.gradable&&c.a.overSome(d.d,f.i)(e)})).map((function(e){var r=function(e,t){var r,n=e.takeMode,o=e.currentTakeId,a=e.gradePending,i=!n&&!o,c=!(r=Object(h.a)(e.appId,t),r&&r.supportsAttemptScore||a);return Object(f.i)(e)&&(i||c)}(e,t);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(r,!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{dashboardEndTime:y(e,r),isOverdueClosed:r})})).sortBy(["dashboardEndTime","endDate"]).takeRight(10).map((function(e){var t=!c.a.isEmpty(e.attempts),r=Object(f.j)(e),n=e.manuallyGraded&&e.gradePending,o=(e.userScore||"0%").replace("%",""),a=t&&r&&n?-1:parseInt(o);return Object.assign(e,{dashboardScore:a})})).value()},g=function(e,t,r){return t?v(e,r):function(e){return c.a.chain(e).filter((function(e){return e.gradable&&Object(f.i)(e)&&e.classAvg})).sortBy("endDate").takeRight(10).map((function(e){return Object.assign({id:e.id,appId:e.appId,classAvg:e.classAvg,name:e.name,submissionCount:e.submissionCount},{dashboardScore:parseInt(e.classAvg.replace("%",""))})})).value()}(e)},_=r(6),P=r.n(_),x=r(366);r(1212);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,k(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.requestClassAverage(this.props.snapshotId)}},{key:"getAverageScore",value:function(e){return e>=0?"".concat(e,"%"):"– –"}},{key:"getAverageScoreStyle",value:function(e){return e>=x.j?"good":e<x.i?"fail":"fair"}},{key:"render",value:function(){var e=P()("ClassAverage__number","ClassAverage__number--".concat(this.getAverageScoreStyle(this.props.score)));return o.a.createElement("div",{className:"ClassAverage"},o.a.createElement("h3",{className:"ClassAverage__heading"},x.d),o.a.createElement("div",{className:e},this.getAverageScore(this.props.score)))}}])&&w(r.prototype,n),a&&w(r,a),t}(n.PureComponent),C=r(494),D=r(369),j=r(2);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,N(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),r=t,(n=[{key:"renderGradebookLink",value:function(e){var t=this;return o.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){var r=t.props,n=r.capClientEventingService;(0,r.onLaunch)(e),n.recordActivity({eventCategory:"Gradebook",eventAction:"clickOpenGBButton"})}},j.s)}},{key:"render",value:function(){var e=Object(D.a)(this.props.dockApps,j.r);return e?this.renderGradebookLink(e):null}}])&&L(r.prototype,n),a&&L(r,a),t}(n.PureComponent),B=Object(C.a)(W),G=r(24),z=r.n(G),M=r(1456),F=r(1095),H=r(170);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=J(t).call(this,e),(r=!o||"object"!==K(o)&&"function"!=typeof o?Q(n):o).getAccessibilityAttrs=r.getAccessibilityAttrs.bind(Q(r)),r.handleBlur=r.handleBlur.bind(Q(r)),r.handleFocus=r.handleFocus.bind(Q(r)),r.handleKeyPress=r.handleKeyPress.bind(Q(r)),r.handleLaunchActivity=r.handleLaunchActivity.bind(Q(r)),r.popoverRef=null,r.setPopOverRef=function(e){r.popoverRef=e},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),r=t,(n=[{key:"getActivityScoreStyle",value:function(e){return e<0?"notGraded":e>=x.j?"good":e>=x.i?"fair":"fail"}},{key:"buildActivityStatusDescription",value:function(e){var t=e.attempts,r=e.dashboardEndTime,n=e.isOverdueClosed,a=r>0&&z()(r).format(x.g),i=this.getActivityStatus(t,n);if(a&&i){var c=P()({"icon-cancel-circle":n,"icon-check":!n});return o.a.createElement("p",null,o.a.createElement("i",{className:c})," ",i," : ",a)}return null}},{key:"getActivityStatus",value:function(e,t){return t?x.a.CLOSED:e&&e.some((function(e){return 2===e.status}))?x.a.DONE:void 0}},{key:"handleLaunchActivity",value:function(){this.props.onLaunchActivity(this.props.activity,!1,H.a.DASHBOARD_ACTIVITY_BUTTON)}},{key:"handleBlur",value:function(){this.popoverRef.hide()}},{key:"handleFocus",value:function(){this.popoverRef.show()}},{key:"handleKeyPress",value:function(e){e.which!==x.q&&e.which!==x.h||this.handleLaunchActivity()}},{key:"buildActivityPopover",value:function(e){var t=e.userScore,r=e.classAvg,n=e.attemptCount,a=e.submissionCount,i=e.id,c=e.name,s=n?n-1:n,u=(this.props.isStudent?t:r)||"--",l=this.props.isStudent?"".concat(s," attempt(s)"):"".concat(a," submission(s)");return o.a.createElement(M.a,{className:"PerformanceDashboard__ActivityPopover",id:i},o.a.createElement("div",{"aria-hidden":"true"},o.a.createElement("button",{className:"btn-link PerformanceDashboard__ActivityPopover__link",onClick:this.handleLaunchActivity},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:c}})),o.a.createElement("p",null,o.a.createElement("span",{className:"PerformanceDashboard__ActivityPopover__score"},u)," |"," ",l),this.buildActivityStatusDescription(e)))}},{key:"buildStudentAriaLabel",value:function(e,t,r,n){var o=t?"".concat(x.p,": ").concat(t,"."):"",a=r?r-1:r,i=1===a?"1 ".concat(x.b,"."):"".concat(a," ").concat(x.c,"."),c=n?z()(n).format(x.g):"",s=0===a?"".concat(x.a.CLOSED," ").concat(c,"."):"".concat(x.a.DONE," ").concat(c,".");return"".concat(e," ").concat(o," ").concat(i," ").concat(s," ").concat(x.e,".")}},{key:"buildInstructorAriaLabel",value:function(e,t,r){var n=1===r?"1 ".concat(x.u):"".concat(r,"  ").concat(x.v);return"".concat(e,". ").concat(x.d,": ").concat(t,". ").concat(n,". ").concat(x.e,".")}},{key:"getAccessibilityAttrs",value:function(e){var t=e.name,r=e.userScore,n=e.attemptCount,o=e.dashboardEndTime,a=e.classAvg,i=e.submissionCount;return{"aria-label":this.props.isStudent?this.buildStudentAriaLabel(t,r,n,o):this.buildInstructorAriaLabel(t,a,i)}}},{key:"render",value:function(){var e=this.props,t=e.activity,r=e.index,n=e.xCoord,a=e.yCoord,i=P()("ActivityCircle","is-".concat(this.getActivityScoreStyle(t.dashboardScore)));return o.a.createElement(F.a,{delayHide:1e3,overlay:this.buildActivityPopover(t),placement:"bottom",ref:this.setPopOverRef,rootClose:!0,trigger:["hover","focus"]},o.a.createElement("button",q({style:{left:"".concat(n,"%"),bottom:"".concat(a,"%")},className:i,id:"circle-".concat(r),onBlur:this.handleBlur,onClick:this.handleLaunchActivity,onFocus:this.handleFocus,onKeyPress:this.handleKeyPress,"data-focus-tag":"".concat(this.props.activity.id,"-").concat(H.a.DASHBOARD_ACTIVITY_BUTTON)},this.getAccessibilityAttrs(t))))}}])&&U(r.prototype,n),a&&U(r,a),t}(n.PureComponent),X=r(195);r(1214);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ee(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,"PerformanceDashboardComponent",(function(){return ne}));var ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,te(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,e),r=t,(n=[{key:"renderGrid",value:function(){return o.a.createElement("g",null,c.a.chain(11).times((function(e){return x.y+e*x.z})).reverse().map((function(e,t){return o.a.createElement("g",{key:t},o.a.createElement("text",{className:"yLabel",textAnchor:"end",x:"100%",y:"".concat(e,"%")},"".concat(10*t,"%")),o.a.createElement("line",{className:"xLine",x1:"0%",x2:"92%",y1:"".concat(e,"%"),y2:"".concat(e,"%")}))})).value(),o.a.createElement("text",{className:"yLabel",textAnchor:"end",x:"100%",y:"96%"},x.n))}},{key:"renderEmptyMessage",value:function(){return o.a.createElement("div",{className:"PerformanceDashboard__emptyMessage"},o.a.createElement("div",{className:"PerformanceDashboard__emptyMessageText"},this.props.isStudent?x.r:x.k))}},{key:"getOnLaunchHandler",value:function(){var e=this,t=Object(D.a)(this.props.dockApps,j.r);return t?function(r){var n=e.props,o=n.handleOpenAppDockFrame,a=n.isStudent,i=e.getGradeBookIframeQueryParams(r);a&&e.props.courseSyncCall(),o(t,i)}:null}},{key:"getGradeBookIframeQueryParams",value:function(e){var t=l()(e||{});return{deepLink:j.K,deepLinkParams:t}}},{key:"renderPerfomanceReports",value:function(){var e=this.props,t=e.isStudent,r=e.showPerformanceReports,n=e.checkpointId,a=this.getOnLaunchHandler();if(!r)return null;var i=o.a.createElement("div",{className:"PerfomanceReportingWidgets"},o.a.createElement("div",{className:"PerfomanceReportingWidgets__widgetWrapper studentWidget"},o.a.createElement(s.StudentTroubleAreas,{onLaunchReport:a}))),c=o.a.createElement("div",{className:"PerfomanceReportingWidgets"},o.a.createElement("div",{className:"PerfomanceReportingWidgets__widgetWrapper"},o.a.createElement(s.TroubledTopics,{checkpointId:n,onLaunchReport:a})),o.a.createElement("div",{className:"PerfomanceReportingWidgets__widgetWrapper"},o.a.createElement(s.ObjectivesOverview,{checkpointId:n,onLaunchReport:a})));return t?i:c}},{key:"plotActivities",value:function(){var e=this,t=90/this.props.dashboardActivities.length;return this.props.dashboardActivities.map((function(r,n){var a=r,i=a.dashboardScore,c=t*n;return o.a.createElement(Y,{activity:a,index:n,isStudent:e.props.isStudent,key:n,xCoord:c,yCoord:i,onLaunchActivity:e.props.handleLaunchActivity})}))}},{key:"render",value:function(){return o.a.createElement("section",null,o.a.createElement("h2",{className:"sr-only"},"Performance Dashboard"),!this.props.isStudent&&o.a.createElement(E,{requestClassAverage:this.props.requestClassAverage,score:this.props.classAverageScore,snapshotId:this.props.snapshotId}),this.renderPerfomanceReports(),o.a.createElement("div",{className:"PerformanceDashboard"},o.a.createElement("h3",{className:"PerformanceDashboard__title"},x.o),o.a.createElement("div",{className:"PerformanceDashboard__header"},this.props.isStudent?x.s:x.l),o.a.createElement("div",{className:"PerformanceDashboard__body"},0===this.props.dashboardActivities.length&&this.renderEmptyMessage(),o.a.createElement("svg",{className:"PerformanceDashboard__PerformanceChart",id:"performanceChart","aria-labelledby":"performanceChartTitle performanceChartDesc",role:"group"},o.a.createElement("title",{id:"performanceChartTitle"},x.x),o.a.createElement("desc",{id:"performanceChartDesc"},this.props.isStudent?x.t:x.m," ",x.w),this.renderGrid()),o.a.createElement("div",{className:"PerformanceDashboard__PointButtonsContainer"},0!==this.props.dashboardActivities.length&&this.plotActivities())),o.a.createElement("div",{className:"text-center"},o.a.createElement(B,{dockApps:this.props.dockApps,onLaunch:this.props.handleOpenAppDockFrame}))))}}])&&$(r.prototype,n),a&&$(r,a),t}(n.PureComponent);t.default=Object(a.connect)((function(e){var t=p.e(e.UserProfileReducer.userProfileData.role),r=e.SnapshotReducer.snapshotData.mindapps,n=Object.values(e.workflow&&e.workflow.nodes&&e.workflow.nodes.activities||[]);return{classAverageScore:e.SnapshotReducer.classAverageScore,dashboardActivities:g(n,t,r)||[],dockApps:e.LayoutContainerReducer.dockApps||[],isStudent:p.e(e.UserProfileReducer.userProfileData.role),snapshotId:e.SnapshotReducer.snapshotData.snapshot.snapshotId}}),{requestClassAverage:X.d})(ne)}}]);
//# sourceMappingURL=22.js.map